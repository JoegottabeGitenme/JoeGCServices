# HRRR Layer Configuration
# Defines WMS/WMTS layers exposed for the HRRR model
# CONUS coverage only

model: hrrr
display_name: "HRRR - High-Resolution Rapid Refresh"

# HRRR covers CONUS only
default_bbox:
  west: -122.72
  south: 21.14
  east: -60.92
  north: 47.84

layers:
  # ==========================================================================
  # Temperature Layers
  # ==========================================================================
  
  - id: hrrr_TMP
    parameter: TMP
    title: "Temperature"
    abstract: "Air temperature at various levels"
    style_file: temperature.json
    units:
      native: K
      display: "°C"
      conversion: K_to_C
    levels:
      - value: "2 m above ground"
        default: true
      - value: "850 mb"
      - value: "700 mb"
      - value: "500 mb"
      - value: "300 mb"
      - value: "250 mb"

  - id: hrrr_DPT
    parameter: DPT
    title: "Dew Point Temperature"
    abstract: "Dew point temperature at 2m above ground"
    style_file: temperature.json
    units:
      native: K
      display: "°C"
      conversion: K_to_C
    levels:
      - value: "2 m above ground"
        default: true

  # ==========================================================================
  # Wind Layers
  # ==========================================================================
  
  - id: hrrr_UGRD
    parameter: UGRD
    title: "U-Component of Wind"
    abstract: "Eastward wind component"
    style_file: wind.json
    units:
      native: m/s
      display: m/s
    levels:
      - value: "10 m above ground"
        default: true
      - value: "850 mb"
      - value: "700 mb"
      - value: "500 mb"
      - value: "300 mb"
      - value: "250 mb"

  - id: hrrr_VGRD
    parameter: VGRD
    title: "V-Component of Wind"
    abstract: "Northward wind component"
    style_file: wind.json
    units:
      native: m/s
      display: m/s
    levels:
      - value: "10 m above ground"
        default: true
      - value: "850 mb"
      - value: "700 mb"
      - value: "500 mb"
      - value: "300 mb"
      - value: "250 mb"

  - id: hrrr_GUST
    parameter: GUST
    title: "Wind Gust"
    abstract: "Surface wind gust speed"
    style_file: wind.json
    units:
      native: m/s
      display: m/s
    levels:
      - value: "surface"
        default: true

  - id: hrrr_WIND_BARBS
    parameter: WIND_BARBS
    title: "Wind Barbs"
    abstract: "Wind direction and speed barbs (composite of UGRD/VGRD)"
    style_file: wind_barbs.json
    composite: true
    requires: [UGRD, VGRD]
    levels:
      - value: "10 m above ground"
        default: true

  # ==========================================================================
  # Moisture Layers
  # ==========================================================================
  
  - id: hrrr_RH
    parameter: RH
    title: "Relative Humidity"
    abstract: "Relative humidity percentage at 2m"
    style_file: humidity.json
    units:
      native: "%"
      display: "%"
    levels:
      - value: "2 m above ground"
        default: true

  # ==========================================================================
  # Precipitation Layers
  # ==========================================================================
  
  - id: hrrr_APCP
    parameter: APCP
    title: "Total Precipitation"
    abstract: "Accumulated precipitation"
    style_file: precipitation.json
    units:
      native: "kg/m^2"
      display: mm
    accumulation: true
    levels:
      - value: "surface"
        default: true

  # ==========================================================================
  # Radar/Reflectivity Layers
  # ==========================================================================
  
  - id: hrrr_REFC
    parameter: REFC
    title: "Composite Reflectivity"
    abstract: "Simulated radar composite reflectivity"
    style_file: reflectivity.json
    units:
      native: dBZ
      display: dBZ
    levels:
      - value: "1000 m above ground"
        default: true

  - id: hrrr_RETOP
    parameter: RETOP
    title: "Echo Top Height"
    abstract: "Height of radar echo tops"
    style_file: reflectivity.json
    units:
      native: m
      display: kft
      conversion: m_to_kft
    levels:
      - value: "cloud top"
        default: true

  # ==========================================================================
  # Convective/Stability Layers
  # ==========================================================================
  
  - id: hrrr_CAPE
    parameter: CAPE
    title: "CAPE"
    abstract: "Convective Available Potential Energy"
    style_file: cape.json
    units:
      native: "J/kg"
      display: "J/kg"
    levels:
      - value: "surface"
        default: true

  - id: hrrr_CIN
    parameter: CIN
    title: "CIN"
    abstract: "Convective Inhibition"
    style_file: cape.json
    units:
      native: "J/kg"
      display: "J/kg"
    levels:
      - value: "surface"
        default: true

  - id: hrrr_MXUPHL
    parameter: MXUPHL
    title: "Updraft Helicity"
    abstract: "Maximum updraft helicity (tornado/severe weather potential)"
    style_file: helicity.json
    units:
      native: "m^2/s^2"
      display: "m^2/s^2"
    levels:
      - value: "2000-5000 m above ground"
        default: true

  # ==========================================================================
  # Lightning
  # ==========================================================================
  
  - id: hrrr_LTNG
    parameter: LTNG
    title: "Lightning Threat"
    abstract: "Lightning flash density"
    style_file: lightning.json
    units:
      native: "flashes/km^2/min"
      display: "flashes/km^2/min"
    levels:
      - value: "entire atmosphere"
        default: true

  # ==========================================================================
  # Visibility
  # ==========================================================================
  
  - id: hrrr_VIS
    parameter: VIS
    title: "Visibility"
    abstract: "Surface visibility"
    style_file: visibility.json
    units:
      native: m
      display: km
      conversion: m_to_km
    levels:
      - value: "surface"
        default: true

  # ==========================================================================
  # Upper-Air
  # ==========================================================================
  
  - id: hrrr_HGT
    parameter: HGT
    title: "Geopotential Height"
    abstract: "Height of pressure surfaces"
    style_file: atmospheric.json
    units:
      native: gpm
      display: m
    levels:
      - value: "500 mb"
        default: true
      - value: "850 mb"
      - value: "700 mb"
      - value: "300 mb"
      - value: "250 mb"
