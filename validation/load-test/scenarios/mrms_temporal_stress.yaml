name: mrms_temporal_stress
description: |
  Comprehensive temporal load test for MRMS radar data.
  Tests cache behavior across 59 time steps with varying zoom levels (3-13).
  Simulates real-world animation playback and multi-user scenarios where
  different users request different time steps simultaneously.

base_url: http://localhost:8080
duration_secs: 300  # 5 minutes
concurrency: 30
warmup_secs: 10
seed: 88888  # Reproducible spatial randomness

layers:
  # MRMS Reflectivity - the layer we have temporal data for
  - name: mrms_REFL
    style: reflectivity
    weight: 1.0

tile_selection:
  type: random
  # Wide zoom range to test different tile sizes and cache patterns
  # Zoom 3-6: Large regional views (fewer tiles, larger areas)
  # Zoom 7-10: State/metro views (moderate tile count)
  # Zoom 11-13: City/county views (many tiles, smaller areas)
  zoom_range: [3, 13]
  bbox:
    # CONUS bounding box for MRMS data
    min_lon: -130.0
    min_lat: 20.0
    max_lon: -60.0
    max_lat: 55.0

# Temporal dimension: cycle through all 59 time steps sequentially
# This simulates animation playback where users loop through time
time_selection:
  type: sequential
  times:
    - "2025-11-28T12:44:39Z"
    - "2025-11-28T12:46:37Z"
    - "2025-11-28T12:48:36Z"
    - "2025-11-28T12:50:32Z"
    - "2025-11-28T12:52:40Z"
    - "2025-11-28T12:54:33Z"
    - "2025-11-28T12:56:36Z"
    - "2025-11-28T12:58:35Z"
    - "2025-11-28T13:00:36Z"
    - "2025-11-28T13:02:37Z"
    - "2025-11-28T13:04:35Z"
    - "2025-11-28T13:06:33Z"
    - "2025-11-28T13:08:34Z"
    - "2025-11-28T13:10:33Z"
    - "2025-11-28T13:12:35Z"
    - "2025-11-28T13:14:36Z"
    - "2025-11-28T13:16:38Z"
    - "2025-11-28T13:18:40Z"
    - "2025-11-28T13:20:35Z"
    - "2025-11-28T13:22:36Z"
    - "2025-11-28T13:24:36Z"
    - "2025-11-28T13:26:34Z"
    - "2025-11-28T13:28:39Z"
    - "2025-11-28T13:30:37Z"
    - "2025-11-28T13:32:39Z"
    - "2025-11-28T13:34:36Z"
    - "2025-11-28T13:36:34Z"
    - "2025-11-28T13:38:33Z"
    - "2025-11-28T13:40:35Z"
    - "2025-11-28T13:42:35Z"
    - "2025-11-28T13:44:39Z"
    - "2025-11-28T13:46:42Z"
    - "2025-11-28T13:48:36Z"
    - "2025-11-28T13:50:37Z"
    - "2025-11-28T13:52:36Z"
    - "2025-11-28T13:54:37Z"
    - "2025-11-28T13:56:31Z"
    - "2025-11-28T13:58:38Z"
    - "2025-11-28T14:00:35Z"
    - "2025-11-28T14:02:38Z"
    - "2025-11-28T14:04:35Z"
    - "2025-11-28T14:06:34Z"
    - "2025-11-28T14:08:37Z"
    - "2025-11-28T14:10:34Z"
    - "2025-11-28T14:12:35Z"
    - "2025-11-28T14:14:32Z"
    - "2025-11-28T14:16:38Z"
    - "2025-11-28T14:18:33Z"
    - "2025-11-28T14:20:37Z"
    - "2025-11-28T14:22:38Z"
    - "2025-11-28T14:24:36Z"
    - "2025-11-28T14:26:33Z"
    - "2025-11-28T14:28:34Z"
    - "2025-11-28T14:30:36Z"
    - "2025-11-28T14:32:38Z"
    - "2025-11-28T14:34:34Z"
    - "2025-11-28T14:36:36Z"
    - "2025-11-28T14:38:33Z"
    - "2025-11-28T14:40:37Z"

# Expected behavior with 30 concurrent workers and sequential time:
# - Each worker cycles through all 59 times sequentially
# - With 300s duration, each worker makes ~300-500 requests (depends on latency)
# - Times cycle: worker 1 starts at T0, worker 2 at T1, etc.
# - This creates realistic animation pattern where different users are at different times
#
# Cache analysis expected:
# - First pass through times: all cache misses (59 GRIB files loaded)
# - Subsequent passes: cache hits (if GRIB cache working)
# - Spatial variation (zoom 3-13, random tiles): tests rendered tile cache diversity
# - Memory pressure: 59 files Ã— ~400KB = ~24MB in GRIB cache
# - Rendered tiles: varies by zoom (zoom 3 = 64 tiles, zoom 13 = 67M tiles possible)
